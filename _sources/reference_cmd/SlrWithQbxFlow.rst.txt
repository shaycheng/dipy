========================
SlrWithQbxFlow
========================

Streamline-based linear registration.

For efficiency we apply the registration on cluster centroids and
remove small clusters.

Parameters
----------
static_files : string
moving_files : string
x0 : string, optional
    rigid, similarity or affine transformation model (default affine)
rm_small_clusters : int, optional
    Remove clusters that have less than `rm_small_clusters`
    (default 50)
qbx_thr : variable int, optional
    Thresholds for QuickBundlesX (default [40, 30, 20, 15])
num_threads : int, optional
    Number of threads. If None (default) then all available threads
    will be used. Only metrics using OpenMP will use this variable.
greater_than : int, optional
    Keep streamlines that have length greater than
    this value (default 50)
less_than : int, optional
    Keep streamlines have length less than this value (default 250)
np_pts : int, optional
    Number of points for discretizing each streamline (default 20)
progressive : boolean, optional
    (default True)
out_dir : string, optional
    Output directory (default input file directory)
out_moved : string, optional
    Filename of moved tractogram (default 'moved.trk')
out_affine : string, optional
    Filename of affine for SLR transformation (default 'affine.txt')
out_stat_centroids : string, optional
    Filename of static centroids (default 'static_centroids.trk')
out_moving_centroids : string, optional
    Filename of moving centroids (default 'moving_centroids.trk')
out_moved_centroids : string, optional
    Filename of moved centroids (default 'moved_centroids.trk')

Notes
-----
The order of operations is the following. First short or long
streamlines are removed. Second the tractogram or a random selection
of the tractogram is clustered with QuickBundlesX. Then SLR
[Garyfallidis15]_ is applied.

References
----------
.. [Garyfallidis15] Garyfallidis et al. "Robust and efficient linear
registration of white-matter fascicles in the space of
streamlines", NeuroImage, 117, 124--140, 2015

.. [Garyfallidis14] Garyfallidis et al., "Direct native-space fiber
bundle alignment for group comparisons", ISMRM, 2014.

.. [Garyfallidis17] Garyfallidis et al. Recognition of white matter
bundles using local and global streamline-based registration
and clustering, Neuroimage, 2017.